(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[354],{3576:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5730),i=r(7104),o=r(6232),s=r(3915),c=r(8273),u=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var n=this.operator,o=i.toSubscriber(t,e,r);if(o.add(n?n.call(o,this.source):this.source||c.config.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),c.config.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){c.config.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),n.canReportError(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var r=this;return new(e=a(e))(function(e,n){var i;i=r.subscribe(function(e){try{t(e)}catch(r){n(r),i&&i.unsubscribe()}},n,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[o.observable]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:s.pipeFromArray(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=a(t))(function(t,r){var n;e.subscribe(function(t){return n=t},function(t){return r(t)},function(){return t(n)})})},t.create=function(e){return new t(e)},t}();function a(t){if(t||(t=c.config.Promise||Promise),!t)throw new Error("no Promise impl found");return t}e.Observable=u},6011:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(8273),i=r(2434);e.empty={closed:!0,next:function(t){},error:function(t){if(n.config.useDeprecatedSynchronousErrorHandling)throw t;i.hostReportError(t)},complete:function(){}}},3409:function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(3576),s=r(7241),c=r(3984),u=r(3058),a=r(5298),l=r(1476),p=function(t){function e(e){var r=t.call(this,e)||this;return r.destination=e,r}return i(e,t),e}(s.Subscriber);e.SubjectSubscriber=p;var h=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return i(e,t),e.prototype[l.rxSubscriber]=function(){return new p(this)},e.prototype.lift=function(t){var e=new d(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new u.ObjectUnsubscribedError;if(!this.isStopped)for(var e=this.observers,r=e.length,n=e.slice(),i=0;i<r;i++)n[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new u.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,r=e.length,n=e.slice(),i=0;i<r;i++)n[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new u.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,e=t.length,r=t.slice(),n=0;n<e;n++)r[n].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new u.ObjectUnsubscribedError;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new u.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),c.Subscription.EMPTY):this.isStopped?(t.complete(),c.Subscription.EMPTY):(this.observers.push(t),new a.SubjectSubscription(this,t))},e.prototype.asObservable=function(){var t=new o.Observable;return t.source=this,t},e.create=function(t,e){return new d(t,e)},e}(o.Observable);e.Subject=h;var d=function(t){function e(e,r){var n=t.call(this)||this;return n.destination=e,n.source=r,n}return i(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):c.Subscription.EMPTY},e}(h);e.AnonymousSubject=d},5298:function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e,r){var n=t.call(this)||this;return n.subject=e,n.subscriber=r,n.closed=!1,n}return i(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var r=e.indexOf(this.subscriber);-1!==r&&e.splice(r,1)}}},e}(r(3984).Subscription);e.SubjectSubscription=o},7241:function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(7382),s=r(6011),c=r(3984),u=r(1476),a=r(8273),l=r(2434),p=function(t){function e(r,n,i){var o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=s.empty;break;case 1:if(!r){o.destination=s.empty;break}if("object"==typeof r){r instanceof e?(o.syncErrorThrowable=r.syncErrorThrowable,o.destination=r,r.add(o)):(o.syncErrorThrowable=!0,o.destination=new h(o,r));break}default:o.syncErrorThrowable=!0,o.destination=new h(o,r,n,i)}return o}return i(e,t),e.prototype[u.rxSubscriber]=function(){return this},e.create=function(t,r,n){var i=new e(t,r,n);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(c.Subscription);e.Subscriber=p;var h=function(t){function e(e,r,n,i){var c,u=t.call(this)||this;u._parentSubscriber=e;var a=u;return o.isFunction(r)?c=r:r&&(c=r.next,n=r.error,i=r.complete,r!==s.empty&&(a=Object.create(r),o.isFunction(a.unsubscribe)&&u.add(a.unsubscribe.bind(a)),a.unsubscribe=u.unsubscribe.bind(u))),u._context=a,u._next=c,u._error=n,u._complete=i,u}return i(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;a.config.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,r=a.config.useDeprecatedSynchronousErrorHandling;if(this._error)r&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)r?(e.syncErrorValue=t,e.syncErrorThrown=!0):l.hostReportError(t),this.unsubscribe();else{if(this.unsubscribe(),r)throw t;l.hostReportError(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var r=function(){return t._complete.call(t._context)};a.config.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(r){if(this.unsubscribe(),a.config.useDeprecatedSynchronousErrorHandling)throw r;l.hostReportError(r)}},e.prototype.__tryOrSetError=function(t,e,r){if(!a.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,r)}catch(n){return a.config.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=n,t.syncErrorThrown=!0,!0):(l.hostReportError(n),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(p);e.SafeSubscriber=h},3984:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(993),i=r(4720),o=r(7382),s=r(8574),c=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var e;if(!this.closed){var r=this,c=r._parentOrParents,a=r._ctorUnsubscribe,l=r._unsubscribe,p=r._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,c instanceof t)c.remove(this);else if(null!==c)for(var h=0;h<c.length;++h)c[h].remove(this);if(o.isFunction(l)){a&&(this._unsubscribe=void 0);try{l.call(this)}catch(f){e=f instanceof s.UnsubscriptionError?u(f.errors):[f]}}if(n.isArray(p)){h=-1;for(var d=p.length;++h<d;){var b=p[h];if(i.isObject(b))try{b.unsubscribe()}catch(f){e=e||[],f instanceof s.UnsubscriptionError?e=e.concat(u(f.errors)):e.push(f)}}}if(e)throw new s.UnsubscriptionError(e)}},t.prototype.add=function(e){var r=e;if(!e)return t.EMPTY;switch(typeof e){case"function":r=new t(e);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof t)){var n=r;(r=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=r._parentOrParents;if(null===i)r._parentOrParents=this;else if(i instanceof t){if(i===this)return r;r._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return r;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[r]:o.push(r),r},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},t.EMPTY=((e=new t).closed=!0,e),t}();function u(t){return t.reduce(function(t,e){return t.concat(e instanceof s.UnsubscriptionError?e.errors:e)},[])}e.Subscription=c},8273:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=!1;e.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},6232:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.observable="function"==typeof Symbol&&Symbol.observable||"@@observable"},1476:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rxSubscriber="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),e.$$rxSubscriber=e.rxSubscriber},3058:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}();e.ObjectUnsubscribedError=r},8574:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}();e.UnsubscriptionError=r},5730:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(7241);e.canReportError=function(t){for(;t;){var e=t.destination;if(t.closed||t.isStopped)return!1;t=e&&e instanceof n.Subscriber?e:null}return!0}},2434:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hostReportError=function(t){setTimeout(function(){throw t},0)}},2516:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.identity=function(t){return t}},993:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},7382:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isFunction=function(t){return"function"==typeof t}},4720:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isObject=function(t){return null!==t&&"object"==typeof t}},3915:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2516);function i(t){return 0===t.length?n.identity:1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}}e.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i(t)},e.pipeFromArray=i},7104:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(7241),i=r(1476),o=r(6011);e.toSubscriber=function(t,e,r){if(t){if(t instanceof n.Subscriber)return t;if(t[i.rxSubscriber])return t[i.rxSubscriber]()}return t||e||r?new n.Subscriber(t,e,r):new n.Subscriber(o.empty)}},9354:(t,e,r)=>{"use strict";r.r(e),r.d(e,{ContractsModule:()=>q});var n=r(3679),i=r(3142),o=r(8583),s=r(7716),c=r(4655);let u=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-contracts-home"]],decls:5,vars:0,consts:[[1,"container","mt-3"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"h1"),s._uU(2,"Contratos"),s.qZA(),s._UZ(3,"hr"),s._UZ(4,"router-outlet"),s.qZA())},directives:[c.lC],encapsulation:2}),t})();var a=r(2238),l=r(3409),p=r(4395),h=r(380),d=r(7487),b=r(8295),f=r(9983),m=r(3220),g=r(1095),y=r(9992);function _(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"mat-list-option",18),s.NdJ("click",function(){const e=s.CHM(t).$implicit;return s.oxw(2).selectSuggestedClient(e.name)})("keyup.enter",function(){const e=s.CHM(t).$implicit;return s.oxw(2).selectSuggestedClient(e.name)}),s._uU(1),s.qZA()}if(2&t){const t=e.$implicit;s.Q6J("value",t.name),s.xp6(1),s.Oqu(t.name)}}function v(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"mat-selection-list",16),s.NdJ("click",function(){return s.CHM(t),s.oxw().showSuggestion}),s.YNc(1,_,2,2,"mat-list-option",17),s.qZA()}if(2&t){const t=s.oxw();s.Q6J("multiple",!1),s.xp6(1),s.Q6J("ngForOf",t.clientsSuggested)}}let S=(()=>{class t{constructor(t,e,r,i,o){this.data=t,this.dialogRef=e,this.fb=r,this.clientService=i,this.contractService=o,this.contract=null,this.title="",this.showSuggestion=!0,this.clientsSuggested=[],this.clients=[],this.debouncer$=new l.Subject,this.formContract=this.fb.group({clientName:["",[n.kI.required]],dateStart:["",[n.kI.required]],dateEnd:["",[n.kI.required]],exams:[0,[n.kI.required]]})}ngOnInit(){this.clientService.findAll().subscribe(t=>{t&&t.clients&&(this.clients=t.clients)}),this.data&&this.data.id?(this.contract=this.data,this.formContract.reset({clientName:this.contract.client.name,dateStart:this.contract.dateStart,dateEnd:this.contract.dateEnd,exams:this.contract.exams}),this.title="Actualizar contrato"):this.title="Crear contrato",this.debouncer$.pipe((0,p.b)(300)).subscribe(t=>{t?(this.clientsSuggested=this.clients.filter(e=>e.name.trim().toLowerCase().includes(t.trim().toLowerCase())),this.showSuggestion=1!==this.clientsSuggested.length||this.clientsSuggested[0].name!==t):this.showSuggestion=!1})}selectSuggestedClient(t){var e;null===(e=this.formContract.get("clientName"))||void 0===e||e.setValue(t)}search(){var t;const e=null===(t=this.formContract.get("clientName"))||void 0===t?void 0:t.value;this.debouncer$.next(e)}save(){this.data?this.update():this.create()}update(){const{dateStart:t,dateEnd:e,exams:r}=this.formContract.value;this.contractService.update(this.data.id,{dateEnd:e,dateStart:t,exams:r,examsDone:0}).subscribe(()=>{this.data.dateEnd=e,this.data.dateStart=t,this.data.exams=r,this.dialogRef.close(this.data)})}create(){const{dateStart:t,dateEnd:e,exams:r,clientName:n}=this.formContract.value,i=this.clients.find(t=>t.name===n);if(!i)throw new Error("Debe seleccionar un nombre de cliente existente");this.contractService.create({clientId:i.id,dateStart:t,dateEnd:e,exams:r}).subscribe(t=>{this.dialogRef.close(t.contract)})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(a.WI),s.Y36(a.so),s.Y36(n.qu),s.Y36(h.y),s.Y36(d.U))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-contract-create-dialog"]],decls:34,vars:7,consts:[[3,"formGroup","ngSubmit"],[1,"d-flex","flex-column","gap-2"],[1,"flex-grow-1"],["appearance","fill",1,"w-100"],["matInput","","type","text","formControlName","clientName","autocomplete","off",3,"input","ngModelChange"],["class","position-absolute bg-light suggestion",3,"multiple","click",4,"ngIf"],["appearance","fill"],["matInput","","formControlName","dateStart",3,"matDatepicker"],["matSuffix","",3,"for"],["picker1",""],["matInput","","formControlName","dateEnd",3,"matDatepicker"],["picker2",""],["matInput","","type","number","formControlName","exams"],[1,"d-flex","flex-wrap","justify-content-end"],["mat-button","","color","warn","mat-dialog-close",""],["mat-raised-button","","color","primary","type","submit"],[1,"position-absolute","bg-light","suggestion",3,"multiple","click"],[3,"value","click","keyup.enter",4,"ngFor","ngForOf"],[3,"value","click","keyup.enter"]],template:function(t,e){if(1&t&&(s.TgZ(0,"h1"),s._uU(1),s.qZA(),s._UZ(2,"hr"),s.TgZ(3,"form",0),s.NdJ("ngSubmit",function(){return e.save()}),s.TgZ(4,"div",1),s.TgZ(5,"div",2),s.TgZ(6,"mat-form-field",3),s.TgZ(7,"mat-label"),s._uU(8,"Cliente"),s.qZA(),s.TgZ(9,"input",4),s.NdJ("input",function(){return e.search()})("ngModelChange",function(){return e.search()}),s.qZA(),s.qZA(),s.YNc(10,v,2,2,"mat-selection-list",5),s.qZA(),s.TgZ(11,"mat-form-field",6),s.TgZ(12,"mat-label"),s._uU(13,"Fecha de inicio"),s.qZA(),s._UZ(14,"input",7),s._UZ(15,"mat-datepicker-toggle",8),s._UZ(16,"mat-datepicker",null,9),s.qZA(),s.TgZ(18,"mat-form-field",6),s.TgZ(19,"mat-label"),s._uU(20,"Fecha de finalizaci\xf3n"),s.qZA(),s._UZ(21,"input",10),s._UZ(22,"mat-datepicker-toggle",8),s._UZ(23,"mat-datepicker",null,11),s.qZA(),s.TgZ(25,"mat-form-field",6),s.TgZ(26,"mat-label"),s._uU(27,"Reconocimientos"),s.qZA(),s._UZ(28,"input",12),s.qZA(),s.TgZ(29,"div",13),s.TgZ(30,"button",14),s._uU(31,"Cerrar"),s.qZA(),s.TgZ(32,"button",15),s._uU(33,"Guardar"),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t){const t=s.MAs(17),r=s.MAs(24);s.xp6(1),s.Oqu(e.title),s.xp6(2),s.Q6J("formGroup",e.formContract),s.xp6(7),s.Q6J("ngIf",e.showSuggestion),s.xp6(4),s.Q6J("matDatepicker",t),s.xp6(1),s.Q6J("for",t),s.xp6(6),s.Q6J("matDatepicker",r),s.xp6(1),s.Q6J("for",r)}},directives:[n._Y,n.JL,n.sg,b.KE,b.hX,f.Nt,n.Fj,n.JJ,n.u,o.O5,m.hl,m.nW,b.R9,m.Mq,n.wV,g.lW,a.ZT,y.Ub,o.sg,y.vS],styles:["mat-list-item[_ngcontent-%COMP%]{cursor:pointer}mat-list-item[_ngcontent-%COMP%]:hover{background-color:#0000001a!important}.suggestion[_ngcontent-%COMP%]{z-index:9999!important}"]}),t})();var w=r(3738),Z=r(6627);function E(t,e){1&t&&(s.TgZ(0,"mat-icon"),s._uU(1,"done_outline"),s.qZA())}function x(t,e){1&t&&(s.TgZ(0,"mat-icon"),s._uU(1,"clear"),s.qZA())}function O(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"div",7),s.TgZ(1,"mat-card"),s.TgZ(2,"mat-card-header"),s.TgZ(3,"div",8),s.YNc(4,E,2,0,"mat-icon",9),s.YNc(5,x,2,0,"mat-icon",9),s.qZA(),s.TgZ(6,"mat-card-title"),s._uU(7),s.qZA(),s.TgZ(8,"mat-card-subtitle"),s._uU(9),s.qZA(),s.qZA(),s.TgZ(10,"mat-card-content"),s.TgZ(11,"p"),s._uU(12," Fecha de inicio: "),s.TgZ(13,"span"),s._uU(14),s.qZA(),s.qZA(),s.TgZ(15,"p"),s._uU(16," Fecha de finalizaci\xf3n: "),s.TgZ(17,"span"),s._uU(18),s.qZA(),s.qZA(),s.TgZ(19,"p"),s._uU(20," Reconocimientos contratados: "),s.TgZ(21,"span"),s._uU(22),s.qZA(),s.qZA(),s.TgZ(23,"p"),s._uU(24," Reconocimientos realizados: "),s.TgZ(25,"span"),s._uU(26),s.qZA(),s.qZA(),s.qZA(),s.TgZ(27,"mat-card-actions",10),s.TgZ(28,"div"),s.TgZ(29,"button",11),s.NdJ("click",function(){const e=s.CHM(t).$implicit;return s.oxw().activate(e)}),s._uU(30," Activar "),s.qZA(),s.TgZ(31,"button",11),s.NdJ("click",function(){const e=s.CHM(t).$implicit;return s.oxw().deactivate(e)}),s._uU(32," Desactivar "),s.qZA(),s.qZA(),s.TgZ(33,"button",4),s.NdJ("click",function(){const e=s.CHM(t).$implicit;return s.oxw().openContractCreateDialog(e)}),s._uU(34," Editar "),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=e.$implicit;s.xp6(3),s.Tol(t.isActive?"text-success":"text-danger"),s.xp6(1),s.Q6J("ngIf",t.isActive),s.xp6(1),s.Q6J("ngIf",!t.isActive),s.xp6(2),s.Oqu(null==t.client?null:t.client.name),s.xp6(2),s.Oqu(null==t.client?null:t.client.address),s.xp6(5),s.Oqu(t.dateStart),s.xp6(4),s.Oqu(t.dateEnd),s.xp6(4),s.Oqu(t.exams),s.xp6(4),s.Oqu(t.examsDone),s.xp6(3),s.Q6J("disabled",t.isActive),s.xp6(2),s.Q6J("disabled",!t.isActive)}}const A=[{path:"",component:u,children:[{path:"list",component:(()=>{class t{constructor(t,e){this.contractService=t,this.matDialog=e,this.contracts=[],this.contractsSource=[],this.term=""}ngOnInit(){this.contractService.findAll().subscribe(t=>{t&&t.contracts&&(this.contracts=t.contracts,this.contractsSource=t.contracts)})}activate(t){if(!t||!t.id)throw new Error("Para activar un contrato se necesita el identificador. Consulte al administrador");this.contractService.removeOrActive(t.id,!0).subscribe(()=>{const e=this.contracts.findIndex(e=>e.id===t.id);this.contracts[e].isActive=!0})}deactivate(t){if(!t||!t.id)throw new Error("Para activar un contrato se necesita el identificador. Consulte al administrador");this.contractService.removeOrActive(t.id,!1).subscribe(()=>{const e=this.contracts.findIndex(e=>e.id===t.id);this.contracts[e].isActive=!1})}openContractCreateDialog(t){t?this.openUpdate(t):this.openCreate()}filter(){this.contracts=this.contractsSource.filter(t=>Object.values(t).join("").concat(t.client.name).trim().toLowerCase().includes(this.term.trim().toLowerCase()))}openUpdate(t){this.matDialog.open(S,{data:t}).afterClosed().subscribe(t=>{if(t&&t.id){const e=this.contracts.findIndex(e=>e.id===t.id);this.contracts[e]=t}})}openCreate(){this.matDialog.open(S).afterClosed().subscribe(t=>{t&&t.id&&this.contracts.push(t)})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(d.U),s.Y36(a.uw))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-contracts-list"]],decls:10,vars:2,consts:[[1,"d-flex","flex-wrap"],[1,"flex-grow-1"],["matInput","","type","text",3,"ngModel","ngModelChange","keyup"],[1,"ps-2","pe-2"],["mat-raised-button","","color","primary",3,"click"],[1,"row","justify-content-evenly"],["class","p-3 col-sm-12 col-lg-6 col-xl-4",4,"ngFor","ngForOf"],[1,"p-3","col-sm-12","col-lg-6","col-xl-4"],["mat-card-avatar",""],[4,"ngIf"],[1,"d-flex","justify-content-between"],["mat-button","",3,"disabled","click"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"mat-form-field",1),s.TgZ(2,"mat-label"),s._uU(3,"Filtrar"),s.qZA(),s.TgZ(4,"input",2),s.NdJ("ngModelChange",function(t){return e.term=t})("keyup",function(){return e.filter()}),s.qZA(),s.qZA(),s.TgZ(5,"div",3),s.TgZ(6,"button",4),s.NdJ("click",function(){return e.openContractCreateDialog()}),s._uU(7,"A\xf1adir contrato"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(8,"div",5),s.YNc(9,O,35,12,"div",6),s.qZA()),2&t&&(s.xp6(4),s.Q6J("ngModel",e.term),s.xp6(5),s.Q6J("ngForOf",e.contracts))},directives:[b.KE,b.hX,f.Nt,n.Fj,n.JJ,n.On,g.lW,o.sg,w.a8,w.dk,w.kc,o.O5,w.n5,w.$j,w.dn,w.hq,Z.Hw],encapsulation:2}),t})()},{path:"**",redirectTo:"list"}]}];let T=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[c.Bz.forChild(A)],c.Bz]}),t})(),q=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[o.ez,T,i.q,n.UX,n.u5]]}),t})()}}]);